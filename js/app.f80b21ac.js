(function(){"use strict";var t={2622:function(t,e,i){var r=i(5130),s=i(6768);const n={class:"main"};function o(t,e,i,r,o,m){const a=(0,s.g2)("TimerControl"),u=(0,s.g2)("TimerList");return(0,s.uX)(),(0,s.CE)("div",n,[(0,s.bF)(a,{"active-timer":o.activeTimer,onPauseTimer:m.onPause,onStartTimer:m.onStart,onStopTimer:m.onStop},null,8,["active-timer","onPauseTimer","onStartTimer","onStopTimer"]),(0,s.bF)(u,{"timers-list":o.timersList,"id-list":o.idList},null,8,["timers-list","id-list"])])}var m=i(4232);const a=t=>((0,s.Qi)("data-v-389350b4"),t=t(),(0,s.jt)(),t),u={class:"timerControlBlock"},c={key:0,style:{"text-align":"left"}},l={key:1,class:"timer"},d=["onClick","disabled"],T={key:2,class:"setting"},h=a((()=>(0,s.Lk)("span",null,":",-1))),p=a((()=>(0,s.Lk)("span",null,":",-1))),y=a((()=>(0,s.Lk)("span",{class:"longSpace"}," - ",-1))),v=a((()=>(0,s.Lk)("p",{class:"hint"},"HH:mm:ss - time in seconds",-1))),f={key:3};function b(t,e,i,n,o,a){return(0,s.uX)(),(0,s.CE)("div",u,["stop"===a.status?((0,s.uX)(),(0,s.CE)("p",c,"New timer")):(0,s.Q3)("",!0),"stop"!==a.status?((0,s.uX)(),(0,s.CE)("div",l,(0,m.v_)(a.formatTimer(o.currentTimer)),1)):(0,s.Q3)("",!0),((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(o.controlsElements,((t,e)=>((0,s.uX)(),(0,s.CE)("button",{key:e,onClick:e=>a.onActionTimer(t.name),disabled:t.disable},(0,m.v_)(t.name),9,d)))),128)),"stop"===a.status?((0,s.uX)(),(0,s.CE)("div",T,[(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":e[0]||(e[0]=t=>o.myTimerOurs=t),value:"123",class:"time",type:"number",min:"0"},null,512),[[r.Jo,o.myTimerOurs]]),h,(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":e[1]||(e[1]=t=>o.myTimerMinutes=t),class:"time",type:"number",min:"0",max:"59"},null,512),[[r.Jo,o.myTimerMinutes]]),p,(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":e[2]||(e[2]=t=>o.myTimerSeconds=t),class:"time",type:"number",min:"0",max:"59"},null,512),[[r.Jo,o.myTimerSeconds]]),y,(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":e[3]||(e[3]=t=>o.myTimerControl=t),type:"number",min:"0"},null,512),[[r.Jo,o.myTimerControl]]),v])):(0,s.Q3)("",!0),"stop"!==a.status?((0,s.uX)(),(0,s.CE)("p",f,(0,m.v_)(i.activeTimer.description),1)):(0,s.bo)(((0,s.uX)(),(0,s.CE)("textarea",{key:4,"onUpdate:modelValue":e[4]||(e[4]=t=>o.newTimer.description=t),class:"desc",placeholder:"Description"},null,512)),[[r.Jo,o.newTimer.description]])])}var S={name:"TimerControl",props:{activeTimer:Object},emits:{"stop-timer":null,"start-timer":null,"pause-timer":null},data(){return{controlsElements:[{name:"play",icon:"",disable:!1},{name:"stop",icon:"",disable:!0},{name:"pause",icon:"",disable:!0}],newTimer:{status:"",dateStart:"",dateEnd:"",plannedTime:3600,description:"",size:0},currentTimer:{ours:0,minutes:0,seconds:0,controlTime:0},myTimerOurs:0,myTimerMinutes:0,myTimerSeconds:0,myTimerControl:0}},computed:{status(){return this.activeTimer.status}},watch:{status(t){this.controlsElements[0].disable="stop"!==t,this.controlsElements[1].disable="stop"===t,this.controlsElements[2].disable="stop"===t,"stop"!==t&&(this.currentTimer=this.onSetTimeByControl(this.activeTimer.plannedTime)),"play"===t&&setTimeout(this.onTimerStep,1e3)},myTimerOurs(t){t=this.onCheckTimeVal(t,"long"),this.myTimerOurs=t,this.myTimerControl=60*this.myTimerOurs*60+60*this.myTimerMinutes+this.myTimerSeconds},myTimerMinutes(t){t=this.onCheckTimeVal(t,"short"),this.myTimerMinutes=t,this.myTimerControl=60*this.myTimerOurs*60+60*this.myTimerMinutes+this.myTimerSeconds},myTimerSeconds(t){t=this.onCheckTimeVal(t,"short"),this.myTimerSeconds=t,this.myTimerControl=60*this.myTimerOurs*60+60*this.myTimerMinutes+this.myTimerSeconds},myTimerControl(t){const e=60*this.myTimerOurs*60+60*this.myTimerMinutes+this.myTimerSeconds;if(t!==e){t=this.onCheckTimeVal(t,"long"),this.myTimerControl=t;let e=this.onSetTimeByControl(t);this.myTimerOurs=e.ours,this.myTimerMinutes=e.minutes,this.myTimerSeconds=e.seconds}}},methods:{onCheckTimeVal(t=0,e="short"){return t=Number(t),t=t<0?-1*t:t,"long"===e||t<60?t:59},formatTimer(t=this.currentTimer){let e="";return e+=t.ours>0?t.ours+":":"",e+=t.minutes<10?"0":"",e+=t.minutes+":",e+=t.seconds<10?"0":"",e+=t.seconds,e},onTimerStep(){this.currentTimer.controlTime>0&&"play"===this.activeTimer.status?(setTimeout(this.onTimerStep,1e3),this.currentTimer.controlTime--,0===this.currentTimer.seconds?(this.currentTimer.seconds=59,0===this.currentTimer.minutes?(this.currentTimer.ours--,this.currentTimer.minutes=59):this.currentTimer.minutes--):this.currentTimer.seconds--):this.currentTimer.controlTime<1&&this.$emit("stop-timer")},onActionTimer(t=""){switch(t){case"play":this.newTimer.plannedTime=this.myTimerControl>0?this.myTimerControl:3600,this.newTimer.status="play",this.newTimer.dateStart=new Date,this.$emit("start-timer",this.newTimer);break;case"pause":this.$emit("pause-timer");break;case"stop":this.$emit("stop-timer");break;default:console.error("some new controls");break}},onSetTimeByControl(t=0){const e=Number(Math.trunc(t/3600)),i=Number(Math.trunc((t-60*e*60)/60)),r=Number(t-60*e*60-60*i);return{ours:e,minutes:i,seconds:r,controlTime:t}}}},k=i(1241);const C=(0,k.A)(S,[["render",b],["__scopeId","data-v-389350b4"]]);var g=C;const w={class:"list"},L={key:0,class:"list__date"},E={class:"list__item"};function O(t,e,i,r,n,o){return(0,s.uX)(),(0,s.CE)("div",w,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(i.timersList,(t=>((0,s.uX)(),(0,s.CE)("div",{class:"list__sector",key:t.id},[i.idList.includes(t.id)?((0,s.uX)(),(0,s.CE)("p",L,(0,m.v_)(o.formatDate(t.dateStart)),1)):(0,s.Q3)("",!0),(0,s.Lk)("p",E,(0,m.v_)(t.id)+". "+(0,m.v_)(o.formatDate(t.dateStart))+" - "+(0,m.v_)(o.formatDate(t.dateEnd))+", works time - "+(0,m.v_)(o.formatTime(t.size)),1)])))),128))])}i(4114);var _={name:"TimerList",props:{timersList:Array,idList:Array},data(){return{}},computed:{uniqDate(){let t=[];return this.timersList.forEach((e=>{t.includes(this.formatDate(e.dateStart))||t.push(e.dateStart)})),t}},methods:{onTest(){},formatDate(t){return t=new Date(t),`${this.onAddZero(t.getDate())}-${this.onAddZero(t.getMonth())}-${t.getFullYear()}`},formatTime(t){let e=Number(Math.trunc(t/3600)),i=Number(Math.trunc((t-60*e*60)/60)),r=Number(t-60*e*60-60*i);return`${this.onAddZero(e)}:${this.onAddZero(i)}:${this.onAddZero(r)}`},onAddZero(t){return t<10?`0${t}`:t}}};const M=(0,k.A)(_,[["render",O],["__scopeId","data-v-1555a0a6"]]);var D=M,A=i(4373);class N{constructor(){}getTimersList(){return A.A.get("https://66939122c6be000fa07c4b8b.mockapi.io/api/JWtimer/timers")}setNewTimer(t={}){return A.A.post("https://66939122c6be000fa07c4b8b.mockapi.io/api/JWtimer/timers",{...t})}updateTimer(t={},e){return A.A.put(`https://66939122c6be000fa07c4b8b.mockapi.io/api/JWtimer/timers/${e}`,{...t})}}const X=new N;var j={name:"App",components:{TimerList:D,TimerControl:g},data(){return{timersList:[],idList:[],activeTimer:{id:0,status:"stop",dateStart:"",dateEnd:"",plannedTime:3600,description:"",size:0}}},mounted(){this.onGetTimersList()},methods:{onPause(){"play"===this.activeTimer.status?(this.activeTimer.status="pause",this.onUpdateActiveTimer(),X.updateTimer(this.activeTimer,this.activeTimer.id).then((t=>{this.activeTimer=t.data})).catch((t=>console.error(t)))):this.activeTimer.status="play"},onStart(t){X.setNewTimer(t).then((e=>{this.activeTimer=t,this.activeTimer.id=e.data.id})).catch((t=>{console.error(t)}))},onStop(t){this.activeTimer.status="stop",void 0!==t&&(this.activeTimer=t),this.onUpdateActiveTimer(),X.updateTimer(this.activeTimer,this.activeTimer.id).then((()=>{this.onGetTimersList()})).catch((t=>{console.error(t)}))},onUpdateActiveTimer(){let t=new Date,e=new Date(this.activeTimer.dateStart);""!==this.activeTimer.dateEnd&&(e=new Date(this.activeTimer.dateEnd));let i=t.getTime()-e.getTime();this.activeTimer.size+=Number(Math.trunc(i/1e3)),this.activeTimer.dateEnd=new Date,this.activeTimer.plannedTime-=Number(Math.trunc(i/1e3))},onGetTimersList(){this.timersList=[],this.idList=[],X.getTimersList().then((t=>{this.timersList=t.data.filter((t=>"stop"===t.status));let e="";this.idList=t.data.map((t=>{if(!this.isEqualDays(e,t.dateStart))return e=t.dateStart,t.id}));let i=t.data[t.data.length-1];if("stop"!==i.status){this.activeTimer={...i};let t=new Date,e=new Date(i.dateStart);this.activeTimer.plannedTime=Number(Math.trunc((e.getTime()+1e3*i.plannedTime-t.getTime())/1e3))}})).catch((t=>{console.error(t)}))},isEqualDays(t,e){return""!==t&&""!==e&&(t=new Date(t),e=new Date(e),t.getDate()===e.getDate()&&t.getFullYear()===e.getFullYear()&&t.getMonth()===e.getMonth())}}};const $=(0,k.A)(j,[["render",o]]);var V=$;(0,r.Ef)(V).mount("#app")}},e={};function i(r){var s=e[r];if(void 0!==s)return s.exports;var n=e[r]={exports:{}};return t[r].call(n.exports,n,n.exports,i),n.exports}i.m=t,function(){var t=[];i.O=function(e,r,s,n){if(!r){var o=1/0;for(c=0;c<t.length;c++){r=t[c][0],s=t[c][1],n=t[c][2];for(var m=!0,a=0;a<r.length;a++)(!1&n||o>=n)&&Object.keys(i.O).every((function(t){return i.O[t](r[a])}))?r.splice(a--,1):(m=!1,n<o&&(o=n));if(m){t.splice(c--,1);var u=s();void 0!==u&&(e=u)}}return e}n=n||0;for(var c=t.length;c>0&&t[c-1][2]>n;c--)t[c]=t[c-1];t[c]=[r,s,n]}}(),function(){i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,{a:e}),e}}(),function(){i.d=function(t,e){for(var r in e)i.o(e,r)&&!i.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})}}(),function(){i.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){var t={524:0};i.O.j=function(e){return 0===t[e]};var e=function(e,r){var s,n,o=r[0],m=r[1],a=r[2],u=0;if(o.some((function(e){return 0!==t[e]}))){for(s in m)i.o(m,s)&&(i.m[s]=m[s]);if(a)var c=a(i)}for(e&&e(r);u<o.length;u++)n=o[u],i.o(t,n)&&t[n]&&t[n][0](),t[n]=0;return i.O(c)},r=self["webpackChunkjustwork_timer"]=self["webpackChunkjustwork_timer"]||[];r.forEach(e.bind(null,0)),r.push=e.bind(null,r.push.bind(r))}();var r=i.O(void 0,[504],(function(){return i(2622)}));r=i.O(r)})();
//# sourceMappingURL=app.f80b21ac.js.map